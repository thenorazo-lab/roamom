# MongoDB λ°μ΄ν„° μ €μ¥ μ‹μ¤ν… μ„¤μ • μ™„λ£

## β… μ™„λ£λ μ‘μ—…

### 1. MongoDB μ—°κ²° λ³µκµ¬
- **μ΄μ „ λ¬Έμ **: `bad auth : authentication failed`
- **ν•΄κ²°**: μƒ λΉ„λ°€λ²νΈλ΅ `.env` νμΌ μ—…λ°μ΄νΈ
- **μƒ λΉ„λ°€λ²νΈ**: `srVKkQdIHR1V1FuX`
- **μ—°κ²° ν™•μΈ**: λ΅μ»¬μ—μ„ MongoDB μ—°κ²° μ„±κ³µ β…

### 2. MongoDB λ°μ΄ν„° ν™•μΈ
- **MongoDBμ— μ €μ¥λ ν¬μΈνΈ**: 22κ°
- μΈμ§„, μλ•, ν¬ν•­, μΈμ‚°, κ²½μ£Ό, κΈ°μ¥, κ°€λ•λ„, λ¶€μ‚° λ“± μ „ μ§€μ—­ ν¬μΈνΈ ν¬ν•¨
- λ°μ΄ν„°κ°€ MongoDBμ— μ•μ „ν•κ² μ €μ¥λμ–΄ μμ

### 3. μ €μ¥ μ‹μ¤ν… κ°•ν™”
#### λ°±μ—”λ“ (backend/routes/points.js):
- β… μλ™ λ°±μ—… μ‹μ¤ν… μ¶”κ°€ (λ΅μ»¬ ν™κ²½ μ „μ©)
- β… λ¨λ“  CRUD μ‘μ—…μ— λ΅κΉ… μ¶”κ°€
- β… μ €μ¥ μ„±κ³µ/μ‹¤ν¨ μ½μ†” μ¶λ ¥

#### ν”„λ΅ νΈμ—”λ“ (frontend/src/pages/PointsAdmin.js):
- β… μ €μ¥ μ„±κ³µ μ‹ alert λ©”μ‹μ§€ ν‘μ‹
- β… μ—λ¬ λ°μƒ μ‹ μƒμ„Έ μ—λ¬ λ©”μ‹μ§€
- β… λ¨λ“  μ‘μ—…μ— μ½μ†” λ΅κ·Έ

### 4. ν™κ²½λ³„ μ €μ¥ λ°©μ‹
| ν™κ²½ | μ €μ¥ λ°©μ‹ | λ°±μ—… |
|------|-----------|------|
| **λ΅μ»¬ κ°λ°** | MongoDB λλ” JSON νμΌ | μλ™ λ°±μ—… (30κ° μ μ§€) |
| **App Engine** | MongoDB μ „μ© | MongoDB Atlas μλ™ λ°±μ—… |

## π“‹ ν„μ¬ μƒνƒ

### λ΅μ»¬ ν™κ²½
- β… MongoDB μ—°κ²°: μ„±κ³µ
- β… ν¬μΈνΈ μ €μ¥/μμ •/μ‚­μ : μ •μƒ μ‘λ™
- β… μλ™ λ°±μ—…: `backend/data/backups/` ν΄λ”μ— μ €μ¥λ¨

### App Engine λ°°ν¬
- β… λ²„μ „: `mongodb-fix` (λ°°ν¬ μ¤‘)
- β… MongoDB URI: ν™κ²½ λ³€μμ— μ„¤μ •λ¨
- β³ ν…μ¤νΈ λ€κΈ° μ¤‘

### ν”„λ΅ νΈμ—”λ“
- β… λΉλ“: μ™„λ£ (main.8ef78b34.js)
- β… μ €μ¥ ν”Όλ“λ°±: κ°•ν™”λ¨
- β³ APK: λΉλ“ ν•„μ”

## π”§ μ‚¬μ© λ°©λ²•

### ν¬μΈνΈ μ¶”κ°€ μ‹:
1. κ΄€λ¦¬μ νμ΄μ§€μ—μ„ ν¬μΈνΈ μ…λ ¥
2. "μ¶”κ°€" λ²„νΌ ν΄λ¦­
3. **"β… {μ λ©} ν¬μΈνΈκ°€ μ„λ²„μ— μ €μ¥λμ—μµλ‹λ‹¤!" λ©”μ‹μ§€ ν™•μΈ**
4. λ©”μ‹μ§€κ°€ μ• λ‚μ¤λ©΄ β†’ μ €μ¥ μ‹¤ν¨, λ‹¤μ‹ μ‹λ„

### λ°μ΄ν„° ν™•μΈ:
```bash
# APIλ΅ μ „μ²΄ ν¬μΈνΈ ν™•μΈ
curl https://able-tide-481608-m5.du.r.appspot.com/api/points

# PowerShell
$points = (Invoke-WebRequest -Uri "https://able-tide-481608-m5.du.r.appspot.com/api/points" -UseBasicParsing).Content | ConvertFrom-Json
Write-Host "μ΄ $($points.Count)κ°"
```

### MongoDB μ§μ ‘ ν™•μΈ:
```bash
cd backend
node check-db.js
```

## π” MongoDB Atlas κ΄€λ¦¬

### μ ‘μ† μ •λ³΄:
- **URL**: https://cloud.mongodb.com/
- **ν΄λ¬μ¤ν„°**: roamom-cluster.4f232kg.mongodb.net
- **μ‚¬μ©μ**: thenorazo_db_user
- **λΉ„λ°€λ²νΈ**: srVKkQdIHR1V1FuX

### μ •κΈ° μ‘μ—…:
1. **λ°±μ—… ν™•μΈ**: MongoDB Atlasλ” μλ™ λ°±μ—… μ κ³µ
2. **IP ν™”μ΄νΈλ¦¬μ¤νΈ**: 0.0.0.0/0 (λ¨λ“  IP ν—μ©) ν™•μΈ
3. **λ°μ΄ν„° λ¨λ‹ν„°λ§**: Atlas λ€μ‹λ³΄λ“μ—μ„ ν™•μΈ κ°€λ¥

## β οΈ μ¤‘μ” μ‚¬ν•­

### App Engine μ ν•μ‚¬ν•­:
- **μ½κΈ° μ „μ© νμΌ μ‹μ¤ν…**: νμΌ μ“°κΈ° λ¶κ°€λ¥
- **ν•΄κ²°μ±…**: MongoDB ν•„μ μ‚¬μ©
- points.json νμΌμ€ λ΅μ»¬ κ°λ° μ „μ©

### λ°μ΄ν„° μ•μ „:
1. **MongoDB Atlas**: μλ™ λ°±μ—… λ° λ³µμ 
2. **λ΅μ»¬ λ°±μ—…**: `backend/data/backups/` (μµλ€ 30κ°)
3. **Git μ»¤λ°‹**: μ¤‘μ” λ³€κ²½ μ‹ μλ™ μ»¤λ°‹ κ¶μ¥

## π€ λ‹¤μ λ‹¨κ³„

### μ¦‰μ‹:
1. β… App Engine λ°°ν¬ μ™„λ£ ν™•μΈ
2. β³ λ°°ν¬λ μ„λ²„μ—μ„ ν¬μΈνΈ μ¶”κ°€ ν…μ¤νΈ
3. β³ ν”„λ΅ νΈμ—”λ“ λΉλ“ λ° APK μƒμ„±

### ν–¥ν›„:
1. MongoDB Atlas λ°±μ—… μ¤μΌ€μ¤„ ν™•μΈ
2. λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ… μ¤ν¬λ¦½νΈ μ¤€λΉ„ (`migrate-to-db.js`)
3. μ •κΈ° λ°μ΄ν„° λ¨λ‹ν„°λ§ μ„¤μ •

## π“ λ¬Έμ  ν•΄κ²°

### MongoDB μ—°κ²° μ‹¤ν¨ μ‹:
```bash
# 1. .env νμΌ ν™•μΈ
cat backend/.env | grep MONGODB_URI

# 2. λ΅μ»¬ ν…μ¤νΈ
cd backend
node check-db.js

# 3. MongoDB Atlas μ ‘μ†ν•μ—¬ μ‚¬μ©μ/IP ν™•μΈ
```

### ν¬μΈνΈ μ €μ¥ μ• λ  λ•:
1. λΈλΌμ°μ € μ½μ†” ν™•μΈ (F12)
2. "β… μ €μ¥ μ„±κ³µ" λ©”μ‹μ§€ ν™•μΈ
3. API μ§μ ‘ νΈμ¶ ν…μ¤νΈ:
```bash
curl -X POST https://able-tide-481608-m5.du.r.appspot.com/api/points \
  -H "x-admin-password: 756400" \
  -H "Content-Type: application/json" \
  -d '{"title":"ν…μ¤νΈ","lat":35.1,"lng":129.1,"desc":"ν…μ¤νΈ"}'
```

## π“ ν„μ¬ λ°μ΄ν„°

MongoDBμ— μ €μ¥λ 22κ° ν¬μΈνΈ:
- μΈμ§„ κ³µμ„Έν•­ (ν”Όλ¬Έμ–΄)
- μλ• μ¶•μ‚°/κ²½μ •/λ€νƒ„
- ν¬ν•­ μ΄κ°€λ¦¬/κ°•μ‚¬/ν•μ •λ¦¬/μ¥κΈΈλ¦¬/λ¨ν¬
- μΈμ‚° μ •μ/νμ§€/μ¬λ„/μ†”κ°
- κ²½μ£Ό μ†΅λ€λ§/μ¤λ¥
- κΈ°μ¥ λ™μ•”
- κ°€λ•λ„ λ™μ„  (λ…μ£Όμ΅°κ°/λ³΄λ¦¬μƒμ°/λ¬Έμ–΄μ²­κ²)
- λ¶€μ‚° μΌκ΄‘/λ‹¤λ€ν¬/μ†΅λ„

---

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2026λ…„ 1μ›” 5μΌ 23:22
**λ°°ν¬ λ²„μ „**: mongodb-fix (λ°°ν¬ μ¤‘)
**MongoDB μƒνƒ**: β… μ—°κ²° μ„±κ³µ
**λ°μ΄ν„° κ°μ**: 22κ° ν¬μΈνΈ
